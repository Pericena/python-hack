<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>ChatBot Tienda</title>
</head>

<body>
  <h1>ğŸ›ï¸ ChatBot de Productos</h1>
  <div id="chat" style="border: 1px solid #000; padding: 10px; width: 300px; height: 300px; overflow-y: auto;"></div>
  <input type="text" id="mensaje" placeholder="Escribe aquÃ­..." />
  <button onclick="enviar()">Enviar</button>

  <script>
    const chat = document.getElementById('chat');

    function agregarMensaje(texto, clase) {
      const p = document.createElement('p');
      p.textContent = texto;
      p.style.fontWeight = clase === 'bot' ? 'bold' : 'normal';
      chat.appendChild(p);
      chat.scrollTop = chat.scrollHeight;
    }

    agregarMensaje("ğŸ¤– Hola, Â¿quÃ© producto quieres vender?", 'bot');

    function enviar() {
      const input = document.getElementById('mensaje');
      const mensaje = input.value;
      agregarMensaje("ğŸ‘¤ " + mensaje, 'user');
      input.value = '';

      fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ mensaje })
      })
        .then(res => res.json())
        .then(data => {
          agregarMensaje("ğŸ¤– " + data.respuesta, 'bot');
        });
    }
  </script>
</body>

</html>